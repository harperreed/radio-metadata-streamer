listen:
  host: 0.0.0.0
  port: 8000

stations:
  - id: "fip"
    icy:
      name: "FIP (proxy)"
      metaint: 16384
      bitrate_hint_kbps: 128
    source:
      url: "https://icecast.radiofrance.fr/fip-midfi.mp3?id=radiofrance"
      request_headers:
        Icy-MetaData: "0"
      connect_timeout_ms: 5000
      read_timeout_ms: 15000
    metadata:
      url: "https://fip-metadata.fly.dev/api/metadata/fip"
      poll_ms: 3000
      build:
        format: "StreamTitle='{artist} - {title}';Title='{title}';Artist='{artist}';StreamUrl='http://localhost:8000/fip/stream';"
        strip_single_quotes: true
        normalize_whitespace: true
        fallback_key_order:
          - now.secondLine.title      # artist
          - now.firstLine.title        # title
    buffering:
      ring_bytes: 262144

logging:
  level: info
  json: false
